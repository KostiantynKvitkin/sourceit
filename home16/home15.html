<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="./style.css">
</head>
<body>
	<div class="button">
		<button id="idbutton">Start</button>
	</div>
	<div id="mainId">
		<div class="inner" id="id1">
		</div>
		<div class="inner" id="id2">
		</div>
		<div class="inner" id="id3">
		</div>
		<div class="inner" id="id4">
		</div>
		<div class="inner" id="id5">
		</div>
		<div class="inner" id="id6">
		</div>
		<div class="inner" id="id7">
		</div>
		<div class="inner" id="id8">
		</div>
		<div class="inner" id="id9">
		</div>
	</div>


</body>
<script type="text/javascript">
/*var el1=document.getElementById('id1'),
	el=document.getElementById('id2'),
	el3=document.getElementById('idx');

var x,j;

	console.dir(el1)

	id2.onmousedown=function(e){
		

		//var coords = getCoords(el);
		//shiftX = e.pageX - coords.left,
		 //shiftY = e.pageY - coords.top;

		 x=id2.style.left;
		 y=id2.style.top;


		function moveAt(e) {
    		
			idx.innerHTML=id2.style.left;

    		 id2.style.left = e.pageX -(id2.offsetWidth+id2.offsetWidth/2) + 'px';
    		 id2.style.top = e.pageY -(id2.offsetHeight+id2.offsetHeight) + 'px';
  		}


  		 document.onmousemove = function(e) {
		    moveAt(e);
		  }


		  id2.onmouseup = function() {

		  	if (id2.style.left<=id1.style.left) {
		  		id2.style.left='0px';
		  		id2.style.top='0px';
		  	} else {

		  	id2.style.left=x;
		 	id2.style.top=y;}

		    document.onmousemove = null;
		    id2.onmouseup = null;
		  };
		  //id2.style.left='0px'

	}


	id2.ondragstart = function() {
  return false;
};*/

var arr=[[0,1,2],
		 [3,4,5],
		 [6,7,8]];

var ELM={x:null, y:null},

	divId={1:{x:0,y:0},
		   2:{x:1,y:0},
		   3:{x:2,y:0},
		   4:{x:0,y:1},
		   5:{x:1,y:1},
		   6:{x:2,y:1},
		   7:{x:0,y:2},
		   8:{x:1,y:2},
		   9:{x:2,y:2},
		   	}; 


/*idbutton.onclick=function () {
	
	//shiftARR(ELM);
	//console.log(arr)
//console.dir(divId)

var find=searARR();


for (var key in divId) {
	//alert(divId[key].x)
	if ( divId[key].x == find.x && divId[key].y==find.y){

		//alert(key)
		var el=document.getElementById('id'+key);
		
		el.style.background='white';
		//alert(typeof key);


	} else {
		var el=document.getElementById('id'+key);
			numb=arr[divId[key].y][divId[key].x];
			//alert('y '+divId[key].y+'x '+divId[key].x)

			el.innerHTML=numb;

	}
}



}*/

//console.log(arr.length)

function shiftARR(el) {
/*	for (var i = 0; i <= arr.length-1; i++) {
		console.log(arr[i]);
	}*/
	var value=arr[el.y][el.x];

	

	if (el.x > 0){

		if (arr[el.y][el.x-1] == 0){
		
		arr[el.y][el.x]=arr[el.y][el.x-1];
		arr[el.y][el.x-1]=value;
		}
	} 

	if (el.x < arr.length-1 ){

		if (arr[el.y][el.x+1]==0){
		
		arr[el.y][el.x]=arr[el.y][el.x+1];
		arr[el.y][el.x+1]=value;
		}
	}

	if ( el.y > 0 ) {

		if (arr[el.y-1][el.x] == 0){
		
		arr[el.y][el.x]=arr[el.y-1][el.x];
		arr[el.y-1][el.x]=value;
		}
	}

	if (el.y < arr.length-1 ){
		if (arr[el.y+1][el.x]==0) {
		
			arr[el.y][el.x]=arr[el.y+1][el.x];
			arr[el.y+1][el.x]=value;
		}
	}
}

function searARR() {
	var currELM={x:0, y:0};
	//console.log(arr[1][1])

		for (var i = 0; i <= arr.length-1; i++) {
			for (var j = 0; j <= arr.length-1; j++) {
			
				if (arr[i][j] == 0) {
					currELM.y=i;
					currELM.x=j;
					return currELM;
				}
			}
	
	}
}

function showARR() {
var find=searARR(),
	allId=document.getElementsByClassName('inner');



for (var i = 0; i < allId.length; i++) {
	allId[i].style.background='red';
	allId[i].style.visibility='visible';
}




for (var key in divId) {
	//alert(divId[key].x)
	if ( divId[key].x == find.x && divId[key].y==find.y){

		//alert(key)
		var el=document.getElementById('id'+key);
		
		el.innerHTML='0';
		el.style.visibility='hidden';
		el.style.background='white';
		
		//alert(typeof key);


	}
	else {
		var el=document.getElementById('id'+key);
			numb=arr[divId[key].y][divId[key].x];
			//alert('y '+divId[key].y+'x '+divId[key].x)

			el.innerHTML=numb;

	}
}
}



mainId.onclick=function(e){
	var idStr=e.target.id,
		nubId=idStr.split('id')[1];

		// console.dir(e.target)

	for (var key in divId) {
	//alert(divId[key].x)
	if (key == nubId) {
		ELM.x=divId[key].x;
		ELM.y=divId[key].y;
		

		shiftARR(ELM);

		showARR();
		//console.log(arr);
		//alert(divId[key].x)
	}
}
}



onload=function(){
	//showARR();
}

/*let vals = [];
for (let x = 0; x < 4; x += 1) {
vals.push(() => {alert(x)});
/*vals.push(function(){
//	alert(x)
})

}*/

//vals[1]()
//showARR();

//console.log(showARR());

//console.log(arr);

//shiftARR(ELM);

//console.log(arr);
</script>
<script src="./model/model.js" type="text/javascript"></script>
<script src="./view/view.js" type="text/javascript"></script>
<script src="./controller/controller.js" type="text/javascript"></script>
<script src="./app.js" type="text/javascript"></script>
</html>